{{ define "main" }}
  {{- $hasToc := and .TableOfContents .Site.Params.blog.showTOC -}}
  {{- $isPost := eq .Section "posts" -}}
  <section class="page-hero page-hero--article">
    <div class="container container--reading">
      <p class="eyebrow">{{ .Section | default "文章" }}</p>
      <h1 class="page-title">{{ .Title }}</h1>
      {{- with .Params.subtitle }}
        <p class="page-subtitle">{{ . }}</p>
      {{- end }}
      {{- if $isPost }}
        {{ partial "article-meta.html" . }}
      {{- end }}
    </div>
  </section>

  <section class="section">
    <div class="container {{ if $hasToc }}article-layout{{ else }}container--reading{{ end }}">
      <article class="article-content">
        <div class="article-body prose">
          {{ .Content }}
        </div>

        {{- if $isPost }}
          {{ partial "article-share.html" . }}
          {{ partial "article-reactions.html" . }}
          {{ partial "related-posts.html" . }}
          {{- if .Site.Params.giscus.enable }}
            {{ partial "comments.html" . }}
          {{- end }}
        {{- end }}
      </article>

      {{- if $hasToc }}
      <aside class="article-sidebar">
        {{ partial "article-toc.html" . }}
      </aside>
      {{- end }}
    </div>
  </section>
{{ end }}
