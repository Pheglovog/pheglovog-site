<div class="comments">
  <div class="comments-header">
    <h3>评论</h3>
  </div>

  <div class="comments-container" id="giscus-container"></div>
</div>

<script>
  (function() {
    const container = document.getElementById('giscus-container');
    if (!container) return;

    const script = document.createElement('script');
    script.src = 'https://giscus.app/client.js';
    script.async = true;
    script.crossOrigin = 'anonymous';
    script.setAttribute('data-repo', '{{ .Site.Params.giscus.repo }}');
    script.setAttribute('data-repo-id', '{{ .Site.Params.giscus.repoId }}');
    script.setAttribute('data-category', '{{ .Site.Params.giscus.category }}');
    script.setAttribute('data-category-id', '{{ .Site.Params.giscus.categoryId }}');
    script.setAttribute('data-mapping', '{{ .Site.Params.giscus.mapping }}');
    script.setAttribute('data-reactions-enabled', '{{ if .Site.Params.giscus.reactionsEnabled }}1{{ else }}0{{ end }}');
    script.setAttribute('data-emit-metadata', '{{ if .Site.Params.giscus.emitMetadata }}1{{ else }}0{{ end }}');
    script.setAttribute('data-input-position', '{{ .Site.Params.giscus.inputPosition }}');
    script.setAttribute('data-theme', 'light');
    script.setAttribute('data-lang', '{{ .Site.Params.giscus.lang }}');

    container.appendChild(script);
  })();
</script>
