<!-- æ–‡ç« åˆ†äº«æŒ‰é’® -->
<div class="article-share">
  <span class="share-label">åˆ†äº«:</span>
  <div class="share-buttons">
    <!-- å¤åˆ¶é“¾æ¥ -->
    <button class="share-btn" id="copy-link" title="å¤åˆ¶é“¾æ¥">
      <span class="share-icon">ğŸ”—</span>
    </button>

    <!-- Twitter -->
    <a href="https://twitter.com/intent/tweet?text={{ .Title }}&url={{ .Permalink }}" target="_blank" class="share-btn" title="åˆ†äº«åˆ° Twitter">
      <span class="share-icon">ğ•</span>
    </a>

    <!-- å¾®åš -->
    <a href="https://service.weibo.com/share/share.php?url={{ .Permalink }}&title={{ .Title }}" target="_blank" class="share-btn" title="åˆ†äº«åˆ°å¾®åš">
      <span class="share-icon">ğŸ“±</span>
    </a>

    <!-- GitHub -->
    <a href="{{ .Permalink }}" target="_blank" class="share-btn" title="åœ¨ GitHub ä¸ŠæŸ¥çœ‹">
      <span class="share-icon">ğŸ™</span>
    </a>
  </div>
</div>

<style>
  .article-share {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin: 1rem 0;
    padding: 1rem;
    background: #fafafa;
    border-radius: 8px;
  }

  .share-label {
    font-size: 14px;
    color: #666;
    font-weight: 500;
  }

  .share-buttons {
    display: flex;
    gap: 0.5rem;
  }

  .share-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    background: #fff;
    border: 1px solid #e5e5e5;
    border-radius: 8px;
    cursor: pointer;
    text-decoration: none;
    transition: all 0.2s;
  }

  .share-btn:hover {
    border-color: #1a1a1a;
    background: #f5f5f5;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .share-icon {
    font-size: 18px;
  }

  @media (max-width: 768px) {
    .article-share {
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .share-btn {
      width: 32px;
      height: 32px;
    }

    .share-icon {
      font-size: 16px;
    }
  }
</style>

<script>
  // å¤åˆ¶é“¾æ¥åŠŸèƒ½
  (function() {
    const copyBtn = document.getElementById('copy-link');

    if (copyBtn) {
      copyBtn.addEventListener('click', function() {
        const url = window.location.href;

        // å¤åˆ¶åˆ°å‰ªè´´æ¿
        if (navigator.clipboard && navigator.clipboard.writeText) {
          navigator.clipboard.writeText(url).then(function() {
            showToast('é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');
          }).catch(function() {
            fallbackCopy(url);
          });
        } else {
          fallbackCopy(url);
        }
      });
    }

    // å›é€€å¤åˆ¶æ–¹æ³•
    function fallbackCopy(url) {
      const textArea = document.createElement('textarea');
      textArea.value = url;
      textArea.style.position = 'fixed';
      textArea.style.left = '-999999px';
      document.body.appendChild(textArea);
      textArea.select();

      try {
        document.execCommand('copy');
        showToast('é“¾æ¥å·²å¤åˆ¶', 'success');
      } catch (err) {
        showToast('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶', 'error');
      }

      document.body.removeChild(textArea);
    }

    // æ˜¾ç¤ºæç¤º
    function showToast(message, type) {
      const toast = document.createElement('div');
      toast.className = 'share-toast';
      toast.textContent = message;

      if (type === 'success') {
        toast.style.backgroundColor = '#16a34a';
      } else if (type === 'error') {
        toast.style.backgroundColor = '#dc2626';
      }

      document.body.appendChild(toast);

      setTimeout(function() {
        toast.classList.add('show');
      }, 10);

      setTimeout(function() {
        toast.classList.remove('show');
      }, 3000);

      setTimeout(function() {
        document.body.removeChild(toast);
      }, 3500);
    }
  })();
</script>

<style>
  .share-toast {
    position: fixed;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    padding: 0.75rem 1.5rem;
    background: #333;
    color: #fff;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    opacity: 0;
    transition: all 0.3s;
    z-index: 9999;
  }

  .share-toast.show {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
  }
</style>
