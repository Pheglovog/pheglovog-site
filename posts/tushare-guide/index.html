<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="é‡åŒ–äº¤æ˜“ | åŒºå—é“¾ | å…¨æ ˆå¼€å‘">
  <title>Tushare Pro 2000 ç§¯åˆ†é…ç½®æŒ‡å— - Pheglovog</title>
  <link rel="stylesheet" href="/css/custom.css">
</head>
<body>
  <nav class="navbar">
    <div class="navbar-content">
      <a href="/" class="navbar-brand">Pheglovog</a>
      <div class="navbar-links">
        <a href="/" class="navbar-link">é¦–é¡µ</a>
        <a href="/projects/" class="navbar-link">é¡¹ç›®</a>
        <a href="/posts/" class="navbar-link">åšå®¢</a>
        <a href="/about/" class="navbar-link">å…³äº</a>
      </div>
    </div>
  </nav>

  <main>
    
<link rel="stylesheet" href="/css/custom.css">

<nav class="navbar">
  <div class="navbar-content">
    <a href="/" class="navbar-brand">Pheglovog</a>
    <div class="navbar-links">
      <a href="/" class="navbar-link">é¦–é¡µ</a>
      <a href="/projects/" class="navbar-link">é¡¹ç›®</a>
      <a href="/posts/" class="navbar-link">åšå®¢</a>
      <a href="/about/" class="navbar-link">å…³äº</a>
    </div>
  </div>
</nav>

<section class="page-section" style="padding-top: 80px;">
  <div class="section-header">
    <a href="/posts/" class="btn btn-outline" style="display: inline-flex; margin-bottom: 1rem;">â† è¿”å›åšå®¢åˆ—è¡¨</a>
    <h2 class="section-title">Tushare Pro 2000 ç§¯åˆ†é…ç½®æŒ‡å—</h2>
    <p class="section-description">2026-01-31</p>
  </div>

  <article style="max-width: 700px; margin: 0 auto; line-height: 1.8;">
    <div style="margin-bottom: 2rem;">
      
      
      <span class="tag">Python</span>
      
      <span class="tag">Tushare</span>
      
      <span class="tag">API</span>
      
      
    </div>

    <div class="content">
      <h2 id="tushare-pro-ç®€ä»‹">Tushare Pro ç®€ä»‹</h2>
<p>Tushare Pro æ˜¯ä¸­å›½è‚¡å¸‚æœ€å…¨é¢çš„æ•°æ®æ¥å£å¹³å°ï¼Œæä¾›è‚¡ç¥¨è¡Œæƒ…ã€è´¢åŠ¡æ•°æ®ã€å®è§‚ç»æµç­‰æ•°æ®ã€‚</p>
<h2 id="ç§¯åˆ†è¯´æ˜">ç§¯åˆ†è¯´æ˜</h2>
<ul>
<li><strong>2000 ç§¯åˆ†</strong>: æ¯æ—¥å¯è°ƒç”¨ 3000 æ¬¡ï¼Œå¹¶å‘é™åˆ¶ 5</li>
<li><strong>5000 ç§¯åˆ†</strong>: æ¯æ—¥å¯è°ƒç”¨ 10000 æ¬¡ï¼Œå¹¶å‘é™åˆ¶ 10</li>
<li><strong>æ›´é«˜ç§¯åˆ†</strong>: æ›´å¤šè°ƒç”¨æ¬¡æ•°å’Œå¹¶å‘æ•°</li>
</ul>
<h2 id="é…ç½®æ­¥éª¤">é…ç½®æ­¥éª¤</h2>
<h3 id="1-æ³¨å†Œè´¦å·">1. æ³¨å†Œè´¦å·</h3>
<p>è®¿é—® <a href="https://tushare.pro">https://tushare.pro</a> æ³¨å†Œè´¦å·å¹¶ç™»å½•</p>
<h3 id="2-è·å–-token">2. è·å– Token</h3>
<ol>
<li>è¿›å…¥ã€Œç”¨æˆ·ä¸­å¿ƒã€â†’ã€Œæ¥å£TOKENã€</li>
<li>å¤åˆ¶ Token</li>
</ol>
<h3 id="3-é…ç½®ç¯å¢ƒå˜é‡">3. é…ç½®ç¯å¢ƒå˜é‡</h3>
<p>åˆ›å»º <code>.env</code> æ–‡ä»¶ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-env" data-lang="env"><span style="display:flex;"><span>TUSHARE_TOKEN<span style="color:#f92672">=</span>your_token_here
</span></span></code></pre></div><h3 id="4-python-ä»£ç ç¤ºä¾‹">4. Python ä»£ç ç¤ºä¾‹</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> tushare <span style="color:#66d9ef">as</span> ts
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> os
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> dotenv <span style="color:#f92672">import</span> load_dotenv
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>load_dotenv()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># åˆå§‹åŒ– API</span>
</span></span><span style="display:flex;"><span>ts<span style="color:#f92672">.</span>set_token(os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;TUSHARE_TOKEN&#39;</span>))
</span></span><span style="display:flex;"><span>pro <span style="color:#f92672">=</span> ts<span style="color:#f92672">.</span>pro_api()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è·å–è‚¡ç¥¨åˆ—è¡¨</span>
</span></span><span style="display:flex;"><span>stock_list <span style="color:#f92672">=</span> pro<span style="color:#f92672">.</span>stock_basic(exchange<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>, list_status<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;L&#39;</span>)
</span></span><span style="display:flex;"><span>print(stock_list<span style="color:#f92672">.</span>head())
</span></span></code></pre></div><h2 id="429-é”™è¯¯å¤„ç†">429 é”™è¯¯å¤„ç†</h2>
<h3 id="é—®é¢˜">é—®é¢˜</h3>
<p>å½“è¯·æ±‚é¢‘ç‡è¶…è¿‡é™åˆ¶æ—¶ï¼Œä¼šæ”¶åˆ° 429 é”™è¯¯ã€‚</p>
<h3 id="è§£å†³æ–¹æ¡ˆæŒ‡æ•°é€€é¿é‡è¯•">è§£å†³æ–¹æ¡ˆï¼šæŒ‡æ•°é€€é¿é‡è¯•</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> asyncio
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> aiohttp
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> tenacity <span style="color:#f92672">import</span> retry, stop_after_attempt, wait_exponential
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@retry</span>(
</span></span><span style="display:flex;"><span>    stop<span style="color:#f92672">=</span>stop_after_attempt(<span style="color:#ae81ff">5</span>),
</span></span><span style="display:flex;"><span>    wait<span style="color:#f92672">=</span>wait_exponential(multiplier<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, min<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>, max<span style="color:#f92672">=</span><span style="color:#ae81ff">60</span>)
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">fetch_tushare_data</span>(url, params):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">async</span> <span style="color:#66d9ef">with</span> aiohttp<span style="color:#f92672">.</span>ClientSession() <span style="color:#66d9ef">as</span> session:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">async</span> <span style="color:#66d9ef">with</span> session<span style="color:#f92672">.</span>get(url, params<span style="color:#f92672">=</span>params) <span style="color:#66d9ef">as</span> response:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> response<span style="color:#f92672">.</span>status <span style="color:#f92672">==</span> <span style="color:#ae81ff">429</span>:
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">Exception</span>(<span style="color:#e6db74">&#34;Rate limited&#34;</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">await</span> response<span style="color:#f92672">.</span>json()
</span></span></code></pre></div><h3 id="å¹¶å‘æ§åˆ¶">å¹¶å‘æ§åˆ¶</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> asyncio
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> asyncio <span style="color:#f92672">import</span> Semaphore
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># é™åˆ¶å¹¶å‘æ•°ä¸º 5</span>
</span></span><span style="display:flex;"><span>semaphore <span style="color:#f92672">=</span> Semaphore(<span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">fetch_with_semaphore</span>(url, params):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">async</span> <span style="color:#66d9ef">with</span> semaphore:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">await</span> fetch_tushare_data(url, params)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ‰¹é‡è·å–æ•°æ®</span>
</span></span><span style="display:flex;"><span>tasks <span style="color:#f92672">=</span> [fetch_with_semaphore(url, params) <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">100</span>)]
</span></span><span style="display:flex;"><span>results <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> asyncio<span style="color:#f92672">.</span>gather(<span style="color:#f92672">*</span>tasks)
</span></span></code></pre></div><h2 id="å¸¸ç”¨-api">å¸¸ç”¨ API</h2>
<h3 id="è·å–æ—¥çº¿è¡Œæƒ…">è·å–æ—¥çº¿è¡Œæƒ…</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pro<span style="color:#f92672">.</span>daily(ts_code<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;000001.SZ&#39;</span>, start_date<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;20240101&#39;</span>, end_date<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;20240201&#39;</span>)
</span></span></code></pre></div><h3 id="è·å–è´¢åŠ¡æŒ‡æ ‡">è·å–è´¢åŠ¡æŒ‡æ ‡</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pro<span style="color:#f92672">.</span>fina_indicator(ts_code<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;000001.SZ&#39;</span>, start_date<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;20240101&#39;</span>)
</span></span></code></pre></div><h3 id="è·å–åŒ—å‘èµ„é‡‘">è·å–åŒ—å‘èµ„é‡‘</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pro<span style="color:#f92672">.</span>moneyflow_hsgt(start_date<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;20240101&#39;</span>, end_date<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;20240201&#39;</span>)
</span></span></code></pre></div><h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>Tushare Pro æ˜¯é‡åŒ–äº¤æ˜“çš„é‡è¦å·¥å…·ï¼Œåˆç†é…ç½®å¹¶å‘æ§åˆ¶å’Œé”™è¯¯å¤„ç†å¯ä»¥æé«˜æ•°æ®è·å–æ•ˆç‡ã€‚</p>
<hr>
<p><strong>ç¥ä½ çš„é‡åŒ–äº¤æ˜“ä¹‹è·¯é¡ºåˆ©ï¼</strong> ğŸ“ˆ</p>

    </div>
  </article>
</section>

<footer class="footer">
  <div class="footer-content">
    <p class="footer-text">Â© 2026 Pheglovog</p>
    <a href="https://github.com/Pheglovog" class="footer-link">GitHub</a>
  </div>
</footer>

  </main>

  <footer class="footer">
    <div class="footer-content">
      <p class="footer-text">Â© 2026 Pheglovog</p>
      <a href="https://github.com/Pheglovog" class="footer-link">GitHub</a>
    </div>
  </footer>
</body>
</html>
